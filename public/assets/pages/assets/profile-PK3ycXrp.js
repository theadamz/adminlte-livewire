const o=document.querySelector("#formInput");function n(){_formValidation=$(o).validate({rules:{username:{required:!0,regex:_regExpForUsername},email:{required:!0,email:!0},name:{required:!0}},submitHandler:r})}function i(){initMaxLength("#username"),initMaxLength("#email"),initMaxLength("#name")}function s(){initSelect2("#timezone")}function r(){MsgBox.Confirm("Are you sure want to update your profile?","Confirm").then(e=>{showProgressButton(!0,"#save"),_data2Send=$("#formInput").serialize(),axiosCustom(`${_baseURL}${_module}/${_controller}/update`,"POST",_data2Send).then(t=>{[200].includes(t.status)?(MsgBox.HtmlNotification(t.data.message.toString(),`${t.statusText}`,"success"),a()):(MsgBox.HtmlNotification(refactorErrorMessages(t.data),`${t.status} - ${t.statusText}`),formValidationSetErrorMessages(t.data.errors)),showProgressButton(!1,"#save")}).catch(t=>{MsgBox.Notification(t.toString()),showProgressButton(!1,"#save")})}).catch(e=>{e&&console.log(e)})}function a(){showBlockUIElement("#formInput"),axiosCustom(`${_baseURL}profile/me`,"GET",null).then(e=>{if([200].includes(e.status)){const t=e.data.data;$("#last_update").val(moment(t.updated_at).format(_jsDateTimeFormat)),$("#username").val(t.username),$("#email").val(t.email),$("#name").val(t.name),$("#role").val(`${t.role_code} - ${t.role_name}`),$('#timezone option[value="'+t.timezone+'"]').prop("selected",!0).change(),$("#bu_name").val(`${t.bu_code} - ${t.bu_name}`),$("#last_login").val(t.last_login?moment(t.last_login).format(_jsDateTimeFormat):"")}else MsgBox.HtmlNotification(e.message);showBlockUIElement("#formInput",!1)}).catch(e=>{MsgBox.Notification(e.toString()),showBlockUIElement("#formInput",!1)})}document.addEventListener("DOMContentLoaded",function(){i(),n(),s(),a()});
