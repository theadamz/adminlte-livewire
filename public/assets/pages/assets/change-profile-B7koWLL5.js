import{i as n,M as e,s as i,a as o,r as l,f as u,d as s}from"./general-EKVRape8.js";const r=document.querySelector("#formInput");function d(){_formValidation=$(r).validate({rules:{email:{required:!0,email:!0},name:{required:!0}},submitHandler:f})}function c(){n("#email"),n("#name")}function m(){g()}function f(){e.Confirm("Are you sure want to save the changes?").then(a=>{i(!0,"#save"),_data2Send=$("#formInput").serialize(),o(`${_baseURL}/change-profile`,"POST",_data2Send).then(t=>{[200].includes(t.status)?(Toast.fire({icon:"success",title:t.statusText,text:t.data.message}),setTimeout(()=>{window.location.reload()},500)):(e.HtmlNotification(l(t.data),`${t.status} - ${t.statusText}`),u(t.data.errors)),i(!1,"#save")}).catch(t=>{e.Notification(t.toString()),i(!1,"#save")})}).catch(a=>{a&&console.log(a)})}function g(){o(`${_baseURL}/profile`,"GET").then(a=>{if([200].includes(a.status)){const t=a.data.data;$("#email").val(t.email),$("#name").val(t.name),$('#timezone option[value="'+t.timezone+'"]').prop("selected",!0).change(),$("#last_sign_in").val(s(t.last_sign_in)),$("#last_update").val(s(t.updated_at)),$("#last_change_password").val(t.last_change_password_at?s(t.last_change_password_at):"Never")}else e.HtmlNotification(l(a.data),`${a.status} - ${a.statusText}`)}).catch(a=>{a&&console.log(a)})}document.addEventListener("DOMContentLoaded",function(){c(),d(),m()});
